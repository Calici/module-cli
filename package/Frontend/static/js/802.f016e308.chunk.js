(self.webpackChunkmodule_test=self.webpackChunkmodule_test||[]).push([[802],{8619:(e,s,t)=>{"use strict";t.d(s,{Yv:()=>h,m6:()=>d,qq:()=>l});var r=t(8372),n=t(3528);class o{}o.storageKey="pharm-token";class a extends o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";super(),this.refreshToken=void 0,this.jwtToken=void 0,this.refreshToken=e,this.jwtToken=s}clear(){this.refreshToken="",this.jwtToken=""}set(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";""!==e&&(this.jwtToken=e),""!==s&&(this.refreshToken=s),this.saveToken()}saveToken(){const e={refreshToken:this.refreshToken,jwtToken:this.jwtToken},s=n.Sn.from(JSON.stringify(e)).toString("base64");localStorage.setItem(a.storageKey,s)}loadToken(){const e=localStorage.getItem(a.storageKey),s=n.Sn.from(e||"","base64").toString("utf-8"),t=JSON.parse(s);this.refreshToken=t.refreshToken,this.jwtToken=t.jwtToken}}class i{constructor(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0;this.url=void 0,this.method=void 0,this.config=void 0,this.url=this._createUrl(t,s),this.method=e,this.config=r||{}}_createUrl(e,s){return/(http|https)(.*)/.test(s)?s:""===e?"".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WS_ENDPOINT:"ws://localhost:8765/"}.REACT_APP_API_ENDPOINT)+s:e+s}}class l extends i{req(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.c.request({url:this.url,method:this.method,headers:s,params:t,data:e,...this.config})}}class c extends i{constructor(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a;super(e,s,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",arguments.length>4?arguments[4]:void 0),this.token=void 0,this.token=t}req(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((n,o)=>{r.c.request({url:this.url,method:this.method,headers:{...this._createHeader(),...s},params:t,data:e,...this.config}).then((e=>n(e))).catch((a=>{a.response&&403===a.response.status?this.fallbackRequest().then((()=>{r.c.request({url:this.url,method:this.method,headers:{...this._createHeader(),...s},params:t,data:e,...this.config}).then((e=>n(e))).catch((e=>o(e)))})).catch((e=>o(e))):o(a)}))}))}}class h extends c{_createHeader(){return{Authorization:"Token ".concat(this.token.jwtToken)}}_createFallbackHeader(){return{Authorization:"Token ".concat(this.token.jwtToken," ").concat(this.token.refreshToken)}}fallbackRequest(){let e=new l("get","user/refresh-token/"),s=this._createFallbackHeader();return new Promise(((t,r)=>{e.req({},s).then((e=>{d.set(e.data.jwt),t(e)})).catch((e=>r(e)))}))}}var d=new a},9080:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(6864),n=t(9804),o=t(1296),a=t(5448),i=t(9060),l=t(8619),c=t(4496),h=t(5476),d=t(4436),u=t(9500),m=t(6584),p=t(2496);class f extends i.Component{render(){return(0,p.jsxs)("div",{className:"loading-box",children:[(0,p.jsx)("div",{className:"loading"}),(0,p.jsx)("p",{className:"loading-text",children:"Loading"})]})}}var g=t(1956);const v=t.p+"static/media/no-request.fbfc414315c0dfcb327a.png";c.default.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(c.default.version,"/pdf.worker.js");const k=e=>{let{file:s,version:t,render:r,props:n,params:o}=e;const[a,c]=i.useState(null),[h,d]=i.useState(!1);return i.useEffect((()=>{if(0===s.length)return;(/(http|https)(.*)/.test(s)?new l.qq("GET",s,"",{responseType:"blob",withCredentials:!1}):new l.Yv("GET",s,l.m6,void 0,{responseType:"blob"})).req({},{},o).then((e=>{e.data instanceof Blob||console.error("Error when querying ",s," response is not blob"),c(e.data)})).catch((e=>{d(!0),console.error(e)}))}),[s,c,t,d,o]),0===s.length?(0,p.jsx)(g.c,{text:"PDF Report has not been generated yet.",img:v,className:"no-result"}):null!==a?(0,p.jsx)(r,{file:a,...n}):h?(0,p.jsx)(g.c,{text:"There has been an error while loading the file.",img:v,className:"no-result"}):(0,p.jsx)(f,{})},T=e=>{let{file:s,version:t,className:r,params:n}=e;const[o,a]=i.useState(0),[l,c]=i.useState(0),g=i.useCallback((e=>{a(e._pdfInfo.numPages),c(1)}),[a,c]),v=i.useCallback((e=>{const s=e+l;s>0&&s<=o&&c(s)}),[c,l,o]);return s instanceof Blob?(0,p.jsxs)("div",{className:"pdf-file-main",children:[(0,p.jsx)("div",{className:"pdf-file-container",children:(0,p.jsx)(h.c,{file:s,onLoadSuccess:g,loading:(0,p.jsx)(f,{}),children:(0,p.jsx)(d.c,{pageNumber:l,renderAnnotationLayer:!1,renderTextLayer:!1,height:window.innerHeight-300})})}),(0,p.jsxs)("div",{className:"pdf-control",children:[(0,p.jsx)("button",{className:"icon-button",onClick:()=>v(-1),children:(0,p.jsx)(u.u,{icon:m.Smt})}),(0,p.jsxs)("p",{children:[l," / ",o]}),(0,p.jsx)("button",{className:"icon-button",onClick:()=>v(1),children:(0,p.jsx)(u.u,{icon:m.wvl})})]})]}):(0,p.jsx)(k,{file:s,version:t,params:n,render:T,props:{className:r,version:t,params:n}})},j=T;t(7432);const x=e=>{let{component:s,controls:t}=e;return(0,p.jsxs)("div",{className:"run-container",children:[(0,p.jsxs)("div",{className:"simul-status",children:[(0,p.jsx)(r.c,{messages:s.messages,mainLineCount:5,className:"one-table-message result-table-message",expandable:!1}),(0,p.jsxs)("div",{className:"simul-progress "+(100===s.progress.value?"done ":"")+("STOP"===s.status?"pause":""),children:[(0,p.jsx)(n.c,{bouncy:s.progress.bouncy,showBar:!0,showNumber:!0,completed:s.progress.value,tick:50}),(0,p.jsx)(o.c,{startTime:s.time.startTime,status:s.status})]}),(0,p.jsx)(a.c,{progress:s.progress.value,controls:t,status:s.status,config:s.controls,className:"one-table"})]}),(0,p.jsx)(j,{file:s.pdf_file.url,version:s.pdf_file.version,params:s.pdf_file.params})]})}},2892:()=>{},5344:()=>{},440:()=>{},2224:()=>{},5724:()=>{},8160:()=>{}}]);
//# sourceMappingURL=802.f016e308.chunk.js.map